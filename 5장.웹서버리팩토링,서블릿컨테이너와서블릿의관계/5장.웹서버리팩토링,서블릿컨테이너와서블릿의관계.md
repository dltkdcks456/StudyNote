### ✅ 톰캣

- Embedded Tomcat
  - 다른 애플리케이션에 내장되어 있는 형태의 톰캣을 의미한다. 즉 내부에 포함되어 있어 애플리케이션을 실행할 때 함께 실행된다
  - 주로 Spring Boot와 같은 프레임워크나 서비스에 사용된다.
  - 애플리케이션을 패키징하고 배포할 때 톰캣 서버를 별도로 설치하거나 설정할 필요가 없으며, 애플리케이션 실행에 필요한 모든 것이 패키지에 포함된다.
- Core Tomcat
  - 코어 톰캣은 일반적인 톰캣 서버를 의미한다. 독립적으로 설치되고 실행된다.
  - 주로 서버 사이드 애플리케이션을 개발하고 배포할 때 사용한다.
  - WAR파일을 만들어 배포하거나, 톰캣 서버에 직접 애플리케이션을 배치하여 실행할 수 있다.

### ❓ WAR vs JAR

![image-20240218185915652](assets/image-20240218185915652.png)

![image-20240218185926940](assets/image-20240218185926940.png)

### ✅ Embedded Tomcat 실행하기

- Tomcat 홈페이지에서 embedded용으로 zip파일을 다운하고 압축을 푼다.
- jar파일들을 애플리케이션 내부로 이동시키고 classpath를 설정하여 jar파일을 인식할 수 있게 한다.

![image-20240218192229042](assets/image-20240218192229042.png)

- 그 후 아래와 같이 main 메서드 생성 후 서버를 실행시키면 톰캣을 실행시킬 수 있다.

  - webapp폴더를 root로 지정하기 때문에 해당 경로에 폴더를 생성해주어야 한다.
    - 테스트용으로 index.html을 만들었는데, 기본적으로 톰캣은 `index.html`을 기본값으로 인식한다.

  ![image-20240218192328177](assets/image-20240218192328177.png)

```java
package net.slipp;

import org.apache.catalina.LifecycleException;
import org.apache.catalina.connector.Connector;
import org.apache.catalina.startup.Tomcat;

import java.io.File;

public class WebServerLauncher {
    public static void main(String[] args) {
        String webappDirLocation = "webapp/";
        Tomcat tomcat = new Tomcat();
        String webPort = System.getenv("PORT");
        if (webPort == null || webPort.isEmpty()) {
            webPort = "8080";
        }
        tomcat.setPort(Integer.valueOf(webPort));
        Connector connector = tomcat.getConnector();
        connector.setURIEncoding("UTF-8");
        // root로 인식시킨다.
        tomcat.addWebapp("/", new File(webappDirLocation).getAbsolutePath());
        System.out.println("configuring app with basedir: "
        + new File("./" + webappDirLocation).getAbsolutePath());
        try {
            tomcat.start();
        } catch (LifecycleException e) {
            e.printStackTrace();
        }
        tomcat.getServer().await();
    }
}
```

### ✅ 서블릿으로 Hello World 출력하기

- 아래와 같이 서블릿을 구성할 수 있다.(서블릿 표준 디렉토리를 맞춰줘야 한다.)
  - 하지만, 클래스 파일을 인식할 수 있는 기본 경로가 존재한다.
  - webapp/WEB-INF/classes 밑에 자바 코드가 있어야 한다.

​	![image-20240218193342538](assets/image-20240218193342538.png)

![image-20240218193103547](assets/image-20240218193103547.png)

- 우선 해당 경로를 폴더 구조를 통해 미리 만들어준다.
  - `slipp/webapp/WEB-INF/classes`
- Project Settings로 들어가서 Modules에서 output 경로를 내가 만든 디렉토리 구조에 맞게 변경시킨다.

![image-20240218194507897](assets/image-20240218194507897.png)